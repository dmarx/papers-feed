\documentclass[acmsmall,screen,nonacm]{acmart}
\usepackage{amsmath,amsfonts,amsthm,mathtools}
\usepackage{algorithmic}
\usepackage{listings}

\citestyle{acmauthoryear}

\definecolor{mygreen}{rgb}{0,0.4,0}
\definecolor{myblue}{rgb}{0,0,0.7}
\definecolor{myred}{rgb}{0.7,0,0}
\definecolor{mygray}{rgb}{0.5,0.5,0.5}
\definecolor{mymauve}{rgb}{0.58,0,0.82}

\newcommand{\cb}{\color{myblue}}
\usepackage{soul}
% \usepackage{unixode}
\usepackage{wrapfig}

\newcommand*{\mlstinline}[1]{\mbox{\lstinline[mathescape]|#1|}}
\newcommand*{\mlstinlin}[1]{\mbox{\lstinline|#1|}}
\lstset{ 
  backgroundcolor=\color{white},   % choose the background color; you must add \usepackage{color} or \usepackage{xcolor}; should come as last argument
%  basicstyle=\footnotesize,        % the size of the fonts that are used for the code
%  breakatwhitespace=false,         % sets if automatic breaks should only happen at whitespace
%  breaklines=true,                 % sets automatic line breaking
%  captionpos=b,                    % sets the caption-position to bottom
  commentstyle=\color{mygray},    % comment style
%  deletekeywords={...},            % if you want to delete keywords from the given language
%  escapeinside={\%*}{*)},          % if you want to add LaTeX within your code
%  extendedchars=true,              % lets you use non-ASCII characters; for 8-bits encodings only, does not work with UTF-8
%  firstnumber=1000,                % start line enumeration with line 1000
%  frame=single,	                   % adds a frame around the code
%  keepspaces=true,                 % keeps spaces in text, useful for keeping indentation of code (possibly needs columns=flexible)
  keywordstyle=\color{black},       % keyword style
  identifierstyle=\color{myblue},
  language=haskell,                 % the language of the code
  basicstyle=\small\ttfamily,
  morekeywords=[2]{sample,score,Meas},            % if you want to add more keywords to the set
  keywordstyle=[2]\color{myred},       % keyword style
  morekeywords=[3]{Prob,uniform,bernoulli,normal,beta,exponential},            % if you want to add more keywords to the set
  keywordstyle=[3]\color{mygreen},       % keyword style
%  numbers=left,                    % where to put the line-numbers; possible values are (none, left, right)
 % numbersep=5pt,                   % how far the line-numbers are from the code
%  numberstyle=\tiny\color{mygray}, % the style that is used for the line-numbers
 % rulecolor=\color{black},         % if not set, the frame-color may be changed on line-breaks within not-black text (e.g. comments (green here))
  showspaces=false,                % show spaces everywhere adding particular underscores; it overrides 'showstringspaces'
  showstringspaces=false,          % underline spaces within strings only
  showtabs=false,                  % show tabs within strings adding particular underscores
%  stepnumber=2,                    % the step between two line-numbers. If it's 1, each line will be numbered
  stringstyle=\color{mymauve},     % string literal style
 % tabsize=2,	                   % sets default tabsize to 2 spaces
 % title=\lstname                   % show the filename of files included with \lstinputlisting; also try caption instead of title
 escapeinside={(*@}{@*)},
 literate={->}{$\rightarrow\;$}{2}
          {<-}{$\leftarrow\;$}{2}
}

\usepackage[export]{adjustbox}
\usepackage{textcomp}
\usepackage{xcolor}
\usepackage{proof}
\usepackage{stmaryrd}
\usepackage{todonotes}
\usepackage{tikz}
\usepackage{tikz-cd}
\usepackage{cleveref}
\usepackage[caption=false]{subfig}
\DeclareMathOperator*{\colim}{colim}

\newtheorem{theorem}{Theorem}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{example}[theorem]{Example}
\newtheorem{corollary}[theorem]{Corollary}
%\usepackage{natbib}
\usepackage{microtype}
\DeclareMathOperator{\Aut}{Aut}
\usepackage{mathrsfs}
\usepackage{newunicodechar}
\newunicodechar{ï¼š}{\colon}
\newunicodechar{âˆ€}{\forall}
\newunicodechar{âˆƒ}{\exists}
\newunicodechar{Î±}{\alpha}
\newunicodechar{Î²}{\beta}
\newunicodechar{Î³}{\gamma}
\newunicodechar{Î´}{\delta}
\newunicodechar{Îµ}{\epsilon}
\newunicodechar{Î¶}{\zeta}
\newunicodechar{Î·}{\eta}
\newunicodechar{Î¸}{\theta}
\newunicodechar{Î¹}{\iota}
\newunicodechar{Îº}{\kappa}
\newunicodechar{Î»}{\lambda}
\newunicodechar{Î¼}{\mu}
\newunicodechar{Î½}{\nu}
\newunicodechar{Î¾}{\xi}
\newunicodechar{Ï}{\rho}
\newunicodechar{Ïƒ}{\sigma}
\newunicodechar{Ï„}{\tau}
\newunicodechar{Ï…}{\upsilon}
\newunicodechar{Ï†}{\phi}
\newunicodechar{Ï‡}{\chi}
\newunicodechar{Ïˆ}{\psi}
\newunicodechar{Ï‰}{\omega}
\newunicodechar{Î£}{\Sigma}
\newunicodechar{Ï€}{\pi}
\newunicodechar{Î }{\Pi}
\newunicodechar{Î“}{\Gamma}
\newunicodechar{Î”}{\Delta}
\newunicodechar{âŠ¢}{\vdash}
\newunicodechar{âˆˆ}{\in}
\newunicodechar{âˆ‰}{\notin}
\newunicodechar{âˆ‹}{\ni}
\newunicodechar{âˆŒ}{\not\ni}
\newunicodechar{âˆ…}{\emptyset}
\newunicodechar{âˆª}{\cup}
\newunicodechar{âˆ©}{\cap}
\newunicodechar{âˆ§}{\wedge}
\newunicodechar{âˆ¨}{\vee}
\newunicodechar{âŠ¥}{\bot}
\newunicodechar{âŠ¤}{\top}
\newunicodechar{â‰¤}{\leq}
\newunicodechar{â‰¥}{\geq}
\newunicodechar{â‰ }{\neq}
\newunicodechar{â‰¡}{\equiv}
\newunicodechar{âŠ†}{\subseteq}
\newunicodechar{âŠ‡}{\supseteq}
\newunicodechar{âŠ‚}{\subset}
\newunicodechar{âŠƒ}{\supset}
\newunicodechar{âŸ¶}{\rightarrow}
\newunicodechar{â†’}{\to}
\newunicodechar{â†ª}{\hookrightarrow}
\newunicodechar{âŸµ}{\leftarrow}
\newunicodechar{â†¦}{\mapsto}
\newunicodechar{âŸ¹}{\Rightarrow}
\newunicodechar{âŸº}{\Leftrightarrow}
\newunicodechar{âŠ—}{\otimes}
\newunicodechar{Ã—}{\times}
\newunicodechar{âˆž}{\infty}
\newunicodechar{â€¦}{\ldots}
\newunicodechar{â‹¯}{\cdots}
\newunicodechar{â‹®}{\vdots}
\newunicodechar{â‹±}{\ddots}
\newunicodechar{â‹°}{\ddots}
\newunicodechar{âˆ§}{\wedge}
\newunicodechar{âˆ¨}{\vee}
\newunicodechar{âˆ©}{\cap}
\newunicodechar{âˆª}{\cup}
\newunicodechar{Â¬}{\neg}
\newunicodechar{â„™}{\mathbb{P}}
\newunicodechar{â„•}{\mathbb{N}}
\newunicodechar{â„}{\mathbb{R}}
\newunicodechar{ð•}{\mathbb{V}}
\newunicodechar{â‰}{\defeq}
\newunicodechar{ð’ž}{\mathscr{C}}
\newunicodechar{ð’Ÿ}{\mathscr{D}}

\newcommand{\hide}[1]{}

\newcommand{\tunit}{\mathsf{unit}}
\newcommand{\treal}{\mathsf{real}}
\newcommand{\tbool}{\mathsf{bool}}
\newcommand{\tvertex}{\mathsf{vertex}}
\newcommand{\tgraph}{\mathsf{graph}}
\newcommand{\tmake}{\mathsf{make}}
\newcommand{\tread}[1]{#1 \#}
\newcommand{\ttrue}{\mathsf{true}}
\newcommand{\tfalse}{\mathsf{false}}
\newcommand{\ite}[3]{\mathsf{if}\,#1\,\mathsf{then}\,#2\,\mathsf{else}\,#3}
\newcommand{\inj}{\mathsf{in}}
\newcommand{\case}[5]{\mathsf{case}\,#1\, \mathsf{of}\,\{\inj_1(#2)\Rightarrow #3;\inj_2(#4)\Rightarrow #5\}}
\newcommand{\casezero}[1]{\mathsf{case}\,#1\,\mathsf{of}\,\{\}}
\newcommand{\casen}[5]{\mathsf{case}\,#1\, \mathsf{of}\,\{#2\Rightarrow #3;\dots;#4\Rightarrow #5\}}
\newcommand{\tnormal}{\mathsf{normal}}
\newcommand{\tbernoulli}{\mathsf{bernoulli}}
\newcommand{\tnew}{\mathsf{new}}
\newcommand{\tedge}{\mathsf{edge}}
\newcommand{\letin}[2]{\mathsf{let}\,#1\,=\,#2\,\mathsf{in}\,}
\newcommand{\letinsqueeze}[2]{\mathsf{let}\,#1{=}#2\,\mathsf{in}\,}
\newcommand{\s}{\,|\,}
\newcommand{\sem}[1]{\llbracket #1\rrbracket}
\newcommand{\semD}[1]{\llbracket #1\rrbracket_{\mathcal{D}}}
\newcommand{\equivD}{\equiv_{\mathcal{D}}}
\newcommand{\RR}{\mathbb{R}}
\newcommand{\NN}{\mathbb{N}}
\newcommand{\VV}{\mathbb{V}}
\newcommand{\AutRado}{\Aut(\mathrm{Rado})}
\newcommand{\id}{\mathrm{id}}
\newcommand{\RadoNom}{\mathbf{RadoNom}}
\newcommand{\Prob}{P}
\newcommand{\inv}{^{\raisebox{0.03ex}{{\textrm{-}}}1}}
\newcommand{\dd}{\mathrm{d}}
\newcommand{\bind}{\mathrel{\scalebox{0.5}[1]{$>\!>=$}}}

\newcommand{\ctxA}{\mathcal{C}}
\newcommand{\ctxE}{\mathcal{E}}
                    \newcommand{\conf}[2]{\langle #1,#2\rangle}

\newcommand{\defeq}{\stackrel {\mathrm{def}}=}
\newcommand{\bernoullisemantics}[2]{\mathrm{Pr}(#1\rightarrow^*#2)}

\newcommand{\Set}{\mathbf{Set}}
\newcommand{\FinStoch}{\mathbf{FinStoch}}
\newcommand{\FinSet}{\mathbf{FinSet}}
\newcommand{\CatA}{\mathbf{C}}
\newcommand{\CatB}{\mathbf{D}}
\newcommand{\CatX}{\mathbf{X}}
\newcommand{\CatC}{\mathbf{A}}
\newcommand{\Meas}{\mathbf{Meas}}
\newcommand{\DistM}{\mathcal{D}}
\newcommand{\Giry}{\mathcal{G}}
\newcommand{\tensor}{\otimes}
\newcommand{\comp}{\circ}
\newcommand{\productmeas}{\otimes}
\newcommand{\marginal}{m}
\newcommand{\fv}{\mathsf{fv}}
\newcommand{\subm}{\mathsf{subm}}

\newcommand{\ie}{\textit{i.e. }}
\newcommand{\eg}{\textit{e.g. }}
\newcommand\restrict[1]{\raisebox{-.5ex}{$|$}_{#1}}
\newcommand{\translation}[1]{\llparenthesis #1\rrparenthesis}
\newcommand{\ErdosRenyi}{Erd\H{o}s--R\'enyi}

\newcommand{\CatAp}{\CatA/\!_\bbase}
\newcommand{\Fam}{\mathsf{Fam}}
\newcommand{\bbase}{\Psi}

%%% If you see 'ACMUNKNOWN' in the 'setcopyright' statement below,
%%% please first submit your publishing-rights agreement with ACM (follow link on submission page).
%%% Then please reload our instructions page and copy-and-paste the NEW commands into your article.
%%% Please contact us in case of questions; allow up to 10 min for the system to propagate the information.
%%%
%%% The following is specific to POPL '24 and the paper
%%% 'Probabilistic Programming Interfaces for Random Graphs: Markov Categories, Graphons, and Nominal Sets'
%%% by Nate Ackerman, Cameron E. Freer, Younesse Kaddar, Jacek Karwowski, Sean Moss, Daniel Roy, Sam Staton, and Hongseok Yang.
%%%
\setcopyright{none}
%\setcopyright{rightsretained}
%\acmDOI{10.1145/3632903}
%\acmYear{2024}
%\copyrightyear{2024}
%\acmSubmissionID{popl24main-p293-p}
%\acmJournal{PACMPL}
%\acmVolume{8}
%\acmNumber{POPL}
%\acmArticle{61}
%\acmMonth{1}
%\received{2023-07-11}
%\received[accepted]{2023-11-07}

\begin{document}

\title{Probabilistic Programming Interfaces for Random Graphs: Markov Categories, Graphons, and Nominal Sets}

\author{Nate Ackerman}
\orcid{0000-0002-8059-7497}
\affiliation{%
  \institution{Harvard University}
  \country{USA}
}
\email{nate@aleph0.net}

\author{Cameron E. Freer}
\orcid{0000-0003-1791-6843}
\affiliation{%
  \institution{Massachusetts Institute of Technology}
  \country{USA}
}
\email{freer@mit.edu}

\author{Younesse Kaddar}
\orcid{0000-0001-7366-9889}
\affiliation{%
  \institution{University of Oxford}
  \country{UK}
}
\email{younesse.kaddar@chch.ox.ac.uk}

\author{Jacek Karwowski}
\orcid{0000-0002-8361-2912}
\affiliation{%
  \institution{University of Oxford}
  \country{UK}
}
\email{jacek.karwowski@cs.ox.ac.uk}

\author{Sean Moss}
\orcid{0009-0005-3930-5340}
\affiliation{%
  \institution{University of Birmingham}
  \country{UK}
}
\email{s.k.moss@bham.ac.uk}

\author{Daniel Roy}
\orcid{0000-0001-8930-0058}
\affiliation{%
  \institution{University of Toronto}
  \country{Canada}
}
\email{daniel.roy@utoronto.ca}

\author{Sam Staton}
\orcid{0000-0002-0141-8922}
\affiliation{%
  \institution{University of Oxford}
  \country{UK}
}
\email{sam.staton@cs.ox.ac.uk}

\author{Hongseok Yang}
\orcid{0000-0003-1502-2942}
\affiliation{%
  \institution{KAIST}
  \department{School of Computing}
  \country{South Korea}
}
\email{hongseok00@gmail.com}
\renewcommand{\shortauthors}{N.~Ackerman, C.~Freer, Y.~Kaddar, J.~Karwowski, S.~Moss, D.~Roy, S.~Staton, H.~Yang}


\begin{abstract}
  We study semantic models of probabilistic programming languages over
  graphs, and establish a connection to graphons from graph
  theory and combinatorics. We show that every well-behaved
  equational theory for our graph probabilistic programming language
  corresponds to a graphon, and conversely, every graphon arises in this way.
  
  We provide three constructions for showing that every graphon arises
  from an equational theory. The first is an abstract construction, using Markov
  categories and monoidal indeterminates. 
  The second and third are more concrete. 
  The second is in terms of traditional measure theoretic probability,
  which covers `black-and-white' graphons.
  The third is in terms of probability monads on the nominal sets of
  Gabbay and Pitts. Specifically, we use a variation of nominal sets
  induced by the theory of graphs, which covers ErdÅ‘s-RÃ©nyi graphons. 
  %We show how graphons correspond to internal probability measures on
  %nominal sets.
  In this way, we build new models of graph probabilistic
  programming from graphons. 
\end{abstract}

\begin{CCSXML}
<ccs2012>
   <concept>
       <concept_id>10003752.10010124</concept_id>
       <concept_desc>Theory of computation~Semantics and reasoning</concept_desc>
       <concept_significance>500</concept_significance>
       </concept>
   <concept>
       <concept_id>10003752.10003753.10003757</concept_id>
       <concept_desc>Theory of computation~Probabilistic computation</concept_desc>
       <concept_significance>500</concept_significance>
       </concept>
 </ccs2012>
\end{CCSXML}

\ccsdesc[500]{Theory of computation~Semantics and reasoning}
\ccsdesc[500]{Theory of computation~Probabilistic computation}

\keywords{probability monads, exchangeable processes, graphons, nominal sets, Markov categories, probabilistic programming}

\maketitle

\input{introduction.tex}
\input{programming_with_graphs.tex}
\input{equations_to_graphons.tex}
\input{graphons_to_equations_syntactic.tex}
\input{random_free.tex}
\input{rado_nominal_sets.tex}
\input{graphons_to_equations.tex}

\input{related_work.tex}


\begin{acks}
  This material is based on work supported by a Royal Society University Research Fellowship, ERC Project BLAST and AFOSR Award No.~FA9550â€“21â€“1â€“003. This work was supported in part by CoCoSys, one of seven centers in JUMP 2.0, a Semiconductor Research Corporation (SRC) program sponsored by DARPA. HY was supported by the National Research Foundation of Korea (NRF) grant funded by the Korea government (MSIT) (No. RS-2023-00279680), and also by the Engineering Research Center Program through the National Research Foundation of Korea (NRF) grant funded by the Korean government (MSIT) (No. NRF-2018R1A5A1059921).

It has been helpful to discuss developments in this work with many people over the years, and we are also grateful to our anonymous reviewers for helpful suggestions. 
\end{acks}

\bibliographystyle{ACM-Reference-Format}
%\bibliographystyle{abbrvnat}
% Necessary to make the document compile for me. Makes sure that URLs in bibentries do not spread over page breaks.
% https://tex.stackexchange.com/questions/1522/pdfendlink-ended-up-in-different-nesting-level-than-pdfstartlink/449633#449633
\interlinepenalty=10000
\enlargethispage{\baselineskip}
\bibliography{bibliography}

\end{document}