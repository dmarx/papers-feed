{"version":3,"file":"popup.bundle.js","sources":["../popup.js"],"sourcesContent":["// popup.js\n\n// Function to get paper data from background script\nasync function getCurrentPaper() {\n  return new Promise((resolve) => {\n    chrome.runtime.sendMessage({type: 'getCurrentPaper'}, response => {\n      console.log('Got paper data from background:', response);\n      resolve(response);\n    });\n  });\n}\n\n// Function to update UI with paper data\nfunction updateUI(paperData) {\n  const titleElement = document.getElementById('paperTitle');\n  const authorsElement = document.getElementById('paperAuthors');\n  const statusElement = document.getElementById('status');\n\n  if (paperData) {\n    titleElement.textContent = paperData.title || paperData.paperId;\n    authorsElement.textContent = paperData.authors;\n    statusElement.textContent = 'Paper tracked! Issue created on GitHub.';\n    \n    // Enable rating buttons\n    document.getElementById('thumbsUp').disabled = false;\n    document.getElementById('thumbsDown').disabled = false;\n    \n    // Set active state on rating buttons\n    document.getElementById('thumbsUp').classList.toggle('active', paperData.rating === 'thumbsup');\n    document.getElementById('thumbsDown').classList.toggle('active', paperData.rating === 'thumbsdown');\n  } else {\n    titleElement.textContent = 'No paper detected';\n    authorsElement.textContent = '';\n    statusElement.textContent = 'Visit a supported paper to track it';\n    \n    // Disable rating buttons\n    document.getElementById('thumbsUp').disabled = true;\n    document.getElementById('thumbsDown').disabled = true;\n  }\n}\n\n// Initialize popup\ndocument.addEventListener('DOMContentLoaded', async () => {\n  console.log('Popup opened');\n  \n  // Get current tab\n  const [tab] = await chrome.tabs.query({ active: true, currentWindow: true });\n  console.log('Current tab:', tab.url);\n  \n  // Get paper from the session tracker\n  let paperData = null;\n  let retries = 3;\n  \n  while (retries > 0 && !paperData) {\n    paperData = await getCurrentPaper();\n    if (!paperData) {\n      await new Promise(resolve => setTimeout(resolve, 500)); // Wait 500ms before retry\n      retries--;\n    }\n  }\n  \n  updateUI(paperData);\n  \n  // Set up rating handlers\n  document.getElementById('thumbsUp').addEventListener('click', () => {\n    chrome.runtime.sendMessage({\n      type: 'updateRating',\n      rating: 'thumbsup'\n    }, response => {\n      if (response && response.success) {\n        document.getElementById('status').textContent = 'Rating updated to: thumbs up';\n        document.getElementById('thumbsUp').classList.add('active');\n        document.getElementById('thumbsDown').classList.remove('active');\n        setTimeout(() => window.close(), 1500);\n      } else {\n        document.getElementById('status').textContent = 'Error: ' + (response?.error || 'Unknown error');\n      }\n    });\n  });\n  \n  document.getElementById('thumbsDown').addEventListener('click', () => {\n    chrome.runtime.sendMessage({\n      type: 'updateRating',\n      rating: 'thumbsdown'\n    }, response => {\n      if (response && response.success) {\n        document.getElementById('status').textContent = 'Rating updated to: thumbs down';\n        document.getElementById('thumbsDown').classList.add('active');\n        document.getElementById('thumbsUp').classList.remove('active');\n        setTimeout(() => window.close(), 1500);\n      } else {\n        document.getElementById('status').textContent = 'Error: ' + (response?.error || 'Unknown error');\n      }\n    });\n  });\n});\n"],"names":[],"mappings":"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"}