{"version":3,"file":"popup.bundle.js","sources":["../popup.js"],"sourcesContent":["// popup.js\nlet currentIssueNumber = null;\n\n// Function to get paper data from background script\nasync function getCurrentPaper() {\n  return new Promise((resolve) => {\n    chrome.runtime.sendMessage({type: 'getCurrentPaper'}, response => {\n      console.log('Got paper data from background:', response);\n      resolve(response);\n    });\n  });\n}\n\n// Function to update UI with paper data\nfunction updateUI(paperData) {\n  const titleElement = document.getElementById('paperTitle');\n  const authorsElement = document.getElementById('paperAuthors');\n  const statusElement = document.getElementById('status');\n\n  if (paperData) {\n    titleElement.textContent = paperData.title || paperData.arxivId;\n    authorsElement.textContent = paperData.authors;\n    statusElement.textContent = 'Paper tracked! Issue created on GitHub.';\n    \n    // Enable rating buttons\n    document.getElementById('thumbsUp').disabled = false;\n    document.getElementById('thumbsDown').disabled = false;\n  } else {\n    titleElement.textContent = 'No arXiv paper detected';\n    authorsElement.textContent = '';\n    statusElement.textContent = 'Visit an arXiv paper to track it';\n    \n    // Disable rating buttons\n    document.getElementById('thumbsUp').disabled = true;\n    document.getElementById('thumbsDown').disabled = true;\n  }\n}\n\n// Initialize popup\ndocument.addEventListener('DOMContentLoaded', async () => {\n  console.log('Popup opened');\n  \n  // Get current tab\n  const [tab] = await chrome.tabs.query({ active: true, currentWindow: true });\n  console.log('Current tab:', tab.url);\n  \n  if (tab.url.includes('arxiv.org')) {\n    console.log('On arXiv page, getting paper data...');\n    // Try multiple times to get paper data, as it might not be ready immediately\n    let retries = 3;\n    let paperData = null;\n    \n    while (retries > 0 && !paperData) {\n      paperData = await getCurrentPaper();\n      if (!paperData) {\n        await new Promise(resolve => setTimeout(resolve, 500)); // Wait 500ms before retry\n        retries--;\n      }\n    }\n    \n    updateUI(paperData);\n    \n    // Set up rating handlers\n    document.getElementById('thumbsUp').addEventListener('click', () => {\n      chrome.runtime.sendMessage({\n        type: 'updateRating',\n        rating: 'thumbsup'\n      }, response => {\n        if (response && response.success) {\n          document.getElementById('status').textContent = 'Rating updated to: thumbs up';\n          setTimeout(() => window.close(), 1500);\n        }\n      });\n    });\n    \n    document.getElementById('thumbsDown').addEventListener('click', () => {\n      chrome.runtime.sendMessage({\n        type: 'updateRating',\n        rating: 'thumbsdown'\n      }, response => {\n        if (response && response.success) {\n          document.getElementById('status').textContent = 'Rating updated to: thumbs down';\n          setTimeout(() => window.close(), 1500);\n        }\n      });\n    });\n  } else {\n    updateUI(null);\n  }\n});\n"],"names":[],"mappings":"AAAA;AAEA;AACA;AACA,eAAe,eAAe,GAAG;AACjC,EAAE,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,KAAK;AAClC,IAAI,MAAM,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,IAAI,EAAE,iBAAiB,CAAC,EAAE,QAAQ,IAAI;AACtE,MAAM,OAAO,CAAC,GAAG,CAAC,iCAAiC,EAAE,QAAQ,CAAC,CAAC;AAC/D,MAAM,OAAO,CAAC,QAAQ,CAAC,CAAC;AACxB,KAAK,CAAC,CAAC;AACP,GAAG,CAAC,CAAC;AACL,CAAC;AACD;AACA;AACA,SAAS,QAAQ,CAAC,SAAS,EAAE;AAC7B,EAAE,MAAM,YAAY,GAAG,QAAQ,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC;AAC7D,EAAE,MAAM,cAAc,GAAG,QAAQ,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC;AACjE,EAAE,MAAM,aAAa,GAAG,QAAQ,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;AAC1D;AACA,EAAE,IAAI,SAAS,EAAE;AACjB,IAAI,YAAY,CAAC,WAAW,GAAG,SAAS,CAAC,KAAK,IAAI,SAAS,CAAC,OAAO,CAAC;AACpE,IAAI,cAAc,CAAC,WAAW,GAAG,SAAS,CAAC,OAAO,CAAC;AACnD,IAAI,aAAa,CAAC,WAAW,GAAG,yCAAyC,CAAC;AAC1E;AACA;AACA,IAAI,QAAQ,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC,QAAQ,GAAG,KAAK,CAAC;AACzD,IAAI,QAAQ,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,QAAQ,GAAG,KAAK,CAAC;AAC3D,GAAG,MAAM;AACT,IAAI,YAAY,CAAC,WAAW,GAAG,yBAAyB,CAAC;AACzD,IAAI,cAAc,CAAC,WAAW,GAAG,EAAE,CAAC;AACpC,IAAI,aAAa,CAAC,WAAW,GAAG,kCAAkC,CAAC;AACnE;AACA;AACA,IAAI,QAAQ,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC,QAAQ,GAAG,IAAI,CAAC;AACxD,IAAI,QAAQ,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,QAAQ,GAAG,IAAI,CAAC;AAC1D,GAAG;AACH,CAAC;AACD;AACA;AACA,QAAQ,CAAC,gBAAgB,CAAC,kBAAkB,EAAE,YAAY;AAC1D,EAAE,OAAO,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;AAC9B;AACA;AACA,EAAE,MAAM,CAAC,GAAG,CAAC,GAAG,MAAM,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,aAAa,EAAE,IAAI,EAAE,CAAC,CAAC;AAC/E,EAAE,OAAO,CAAC,GAAG,CAAC,cAAc,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC;AACvC;AACA,EAAE,IAAI,GAAG,CAAC,GAAG,CAAC,QAAQ,CAAC,WAAW,CAAC,EAAE;AACrC,IAAI,OAAO,CAAC,GAAG,CAAC,sCAAsC,CAAC,CAAC;AACxD;AACA,IAAI,IAAI,OAAO,GAAG,CAAC,CAAC;AACpB,IAAI,IAAI,SAAS,GAAG,IAAI,CAAC;AACzB;AACA,IAAI,OAAO,OAAO,GAAG,CAAC,IAAI,CAAC,SAAS,EAAE;AACtC,MAAM,SAAS,GAAG,MAAM,eAAe,EAAE,CAAC;AAC1C,MAAM,IAAI,CAAC,SAAS,EAAE;AACtB,QAAQ,MAAM,IAAI,OAAO,CAAC,OAAO,IAAI,UAAU,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC,CAAC;AAC/D,QAAQ,OAAO,EAAE,CAAC;AAClB,OAAO;AACP,KAAK;AACL;AACA,IAAI,QAAQ,CAAC,SAAS,CAAC,CAAC;AACxB;AACA;AACA,IAAI,QAAQ,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC,gBAAgB,CAAC,OAAO,EAAE,MAAM;AACxE,MAAM,MAAM,CAAC,OAAO,CAAC,WAAW,CAAC;AACjC,QAAQ,IAAI,EAAE,cAAc;AAC5B,QAAQ,MAAM,EAAE,UAAU;AAC1B,OAAO,EAAE,QAAQ,IAAI;AACrB,QAAQ,IAAI,QAAQ,IAAI,QAAQ,CAAC,OAAO,EAAE;AAC1C,UAAU,QAAQ,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,WAAW,GAAG,8BAA8B,CAAC;AACzF,UAAU,UAAU,CAAC,MAAM,MAAM,CAAC,KAAK,EAAE,EAAE,IAAI,CAAC,CAAC;AACjD,SAAS;AACT,OAAO,CAAC,CAAC;AACT,KAAK,CAAC,CAAC;AACP;AACA,IAAI,QAAQ,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,gBAAgB,CAAC,OAAO,EAAE,MAAM;AAC1E,MAAM,MAAM,CAAC,OAAO,CAAC,WAAW,CAAC;AACjC,QAAQ,IAAI,EAAE,cAAc;AAC5B,QAAQ,MAAM,EAAE,YAAY;AAC5B,OAAO,EAAE,QAAQ,IAAI;AACrB,QAAQ,IAAI,QAAQ,IAAI,QAAQ,CAAC,OAAO,EAAE;AAC1C,UAAU,QAAQ,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,WAAW,GAAG,gCAAgC,CAAC;AAC3F,UAAU,UAAU,CAAC,MAAM,MAAM,CAAC,KAAK,EAAE,EAAE,IAAI,CAAC,CAAC;AACjD,SAAS;AACT,OAAO,CAAC,CAAC;AACT,KAAK,CAAC,CAAC;AACP,GAAG,MAAM;AACT,IAAI,QAAQ,CAAC,IAAI,CAAC,CAAC;AACnB,GAAG;AACH,CAAC,CAAC"}