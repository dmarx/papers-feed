(()=>{"use strict";async function t(){return new Promise((t=>{chrome.runtime.sendMessage({type:"getCurrentPaper"},(e=>{console.log("Got paper data from background:",e),t(e)}))}))}function e(t){const e=document.getElementById("paperTitle"),n=document.getElementById("paperAuthors"),o=document.getElementById("status");t?(e.textContent=t.title||t.arxivId,n.textContent=t.authors,o.textContent="Paper tracked! Issue created on GitHub.",document.getElementById("thumbsUp").disabled=!1,document.getElementById("thumbsDown").disabled=!1):(e.textContent="No arXiv paper detected",n.textContent="",o.textContent="Visit an arXiv paper to track it",document.getElementById("thumbsUp").disabled=!0,document.getElementById("thumbsDown").disabled=!0)}document.addEventListener("DOMContentLoaded",(async()=>{console.log("Popup opened");const[n]=await chrome.tabs.query({active:!0,currentWindow:!0});if(console.log("Current tab:",n.url),n.url.includes("arxiv.org")){console.log("On arXiv page, getting paper data...");let n=3,o=null;for(;n>0&&!o;)o=await t(),o||(await new Promise((t=>setTimeout(t,500))),n--);e(o),document.getElementById("thumbsUp").addEventListener("click",(()=>{chrome.runtime.sendMessage({type:"updateRating",rating:"thumbsup"},(t=>{t&&t.success&&(document.getElementById("status").textContent="Rating updated to: thumbs up",setTimeout((()=>window.close()),1500))}))})),document.getElementById("thumbsDown").addEventListener("click",(()=>{chrome.runtime.sendMessage({type:"updateRating",rating:"thumbsdown"},(t=>{t&&t.success&&(document.getElementById("status").textContent="Rating updated to: thumbs down",setTimeout((()=>window.close()),1500))}))}))}else e(null)}))})();